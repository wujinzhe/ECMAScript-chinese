# 4 预览

## 4.1 web脚本

web浏览器为客户端计算提供ECMAScript宿主环境，例如，包括表示窗口、菜单、弹出窗口、对话框、文本区域、锚定、frame、history、cookies和输入/输出的对象。此外，主机环境提供了一种将脚本代码附加到事件的方法，例如焦点更改、页面和图像加载、卸载、错误和中止、选择、表单提交和鼠标操作。脚本代码出现在HTML中，显示的页面是用户界面元素以及固定和计算的文本和图像的组合。脚本代码是对用户交互的反应，不需要主程序。

web服务器为服务器端计算提供了不同的主机环境，包括表示请求、客户端和文件的对象；以及锁定和共享数据的机制。通过同时使用浏览器端和服务器端脚本，可以在客户端和服务器之间分发计算，同时为基于Web的应用程序提供自定义的用户界面。

每个支持ECMAScript的Web浏览器和服务器都提供自己的宿主环境，从而完成ECMAScript执行环境。

## 4.2 ECMAScript预览

下面是ecmascript的非正式概述——并不是对语言的所有部分都进行了描述。这个概述不是标准本身的一部分。

ECMAScript是基于对象的:基本语言和主机功能是由对象提供的，而ECMAScript程序是通信对象的集群。在ECMAScript中，对象是0个或多个属性的集合，每个属性都具有决定如何使用每个属性的属性——例如，当属性的可写属性设置为false时，执行的ECMAScript代码为属性分配不同值的任何尝试都会失败。属性是容纳其他对象、基本值或函数的容器。原始值是下列内置类型之一的成员:Undefined、Null、Boolean、Number、BigInt、String和Symbol;对象是内置类型对象的成员;函数是可调用的对象。通过属性与对象关联的函数称为方法。

ECMAScript定义了一个内置对象集合，它完善了ECMAScript实体的定义。这些内置对象包括全局对象;对象是语言运行时语义的基础，包括对象、函数、布尔值、符号和各种错误对象;表示和操作数字值(包括数学、数字和日期)的对象;文本处理对象的字符串和RegExp;对象是值的索引集合，包括Array和9种不同类型的类型化数组，其元素都具有特定的数字数据表示;键控集合，包括Map和Set对象;支持结构化数据的对象，包括JSON对象、ArrayBuffer、SharedArrayBuffer和DataView;支持控制抽象的对象，包括生成器函数和承诺对象;和反射对象，包括代理和反射。

ECMAScript还定义了一组内置操作符。ECMAScript运算符包括各种一元运算符、乘法运算符、加法运算符、位移位运算符、关系运算符、等式运算符、二进制位运算符、二进制逻辑运算符、赋值运算符和逗号运算符。

大型ECMAScript程序由模块支持，模块允许将程序分成多个语句和声明序列。每个模块显式地标识它使用的需要其他模块提供的声明，以及哪些声明可供其他模块使用。

ECMAScript语法有意模仿Java语法。ECMAScript语法很轻松，使它成为一种易于使用的脚本语言。例如，变量不需要声明类型，类型也不与属性相关联，定义的函数不需要在调用之前以文本的形式显示其声明

### 4.2.1 对象

尽管ECMAScript包含类定义的语法，但ECMAScript对象基本上不是基于类的，如c++、Smalltalk或Java中的对象。相反，可以通过各种方式创建对象，包括通过文字表示法或通过构造函数，构造函数创建对象，然后执行代码，通过为其属性分配初始值来初始化全部或部分对象。每个构造函数都有一个名为“prototype”的属性，用于实现基于原型的继承和共享属性。在新表达式中使用构造函数创建对象;例如，new Date(2009,11)创建一个新的Date对象。在不使用new的情况下调用构造函数会产生依赖于构造函数的结果。例如，Date()生成当前日期和时间的字符串表示形式，而不是对象。

构造函数创建的每个对象都有一个对其构造函数“prototype”属性值的隐式引用(称为对象的prototype)。此外，原型可以有一个对其原型的非空隐式引用，等等;这称为原型链。当引用对象中的属性时，该引用将引用原型链中包含该名称属性的第一个对象中的该名称的属性。换句话说，首先要检查直接提到的对象是否具有这样的属性;如果该对象包含指定的属性，则为引用引用的属性;如果该对象不包含命名属性，则接下来检查该对象的原型;等等。